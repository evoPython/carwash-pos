<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Carwash POS Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='js/tabulator/tabulator.min.css') }}" />
</head>

<body>
    <header>
        <div class="header-left">
            <h1>Carwash POS</h1>
            <button id="btn-open-modal" class="btn-primary" style="margin-left: 2rem;">New Order</button>
        </div>
        <div class="header-center">
            <!-- Empty center for better balance -->
        </div>
        <div class="header-right">
            <div class="user-info">
                <div class="user-avatar">{{ current_user.username[0].upper() }}</div>
                <div class="user-details">
                    <h3>{{ current_user.username }}</h3>
                    <span class="user-role {{ current_user.role.lower() }}">{{ current_user.role }}</span>
                </div>
                {% if current_user.has_permission(80) %}
                <a href="{{ url_for('users') }}" class="btn">Manage Users</a>
                {% endif %}
                <a href="{{ url_for('logout') }}" class="logout-btn">Logout</a>
            </div>
        </div>
    </header>

    <main>
        <section class="controls">
            <div class="filter">
                <!-- <label>Date:</label>
                <input type="date" id="filter-date" /> -->
                <label>Month:</label>
                <input type="month" id="filter-month" />
                <button id="btn-refresh" class="btn">Refresh</button>
            </div>
            <div class="summary">
                <!-- Income Group -->
                <div class="card gross">
                    <h2>Gross Income</h2>
                    <p id="sum-income">₱0.00</p>
                </div>
                <div class="card net">
                    <h2>Net Income</h2>
                    <p id="sum-net">₱0.00</p>
                </div>
                <div class="card expense">
                    <h2>Expenses</h2>
                    <p id="sum-expenses">₱0.00</p>
                </div>
                <div class="card share-ceta">
                    <h2>Cetadcco Share</h2>
                    <p id="sum-cetadcco">₱0.00</p>
                </div>
                <div class="card share-carw">
                    <h2>Carwasher Share</h2>
                    <p id="sum-carwasher">₱0.00</p>
                </div>
            </div>
        </section>

        <section class="table-section">
            <div id="orders-table"></div>
        </section>
    </main>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span id="modal-close" class="modal-close">&times;</span>
            <h2>New Order</h2>
            <form id="order-form">
                <div class="form-row">
                    <label>
                        Vehicle Type
                        <select id="vehicle-type" required>
                            <option value="" disabled selected>Choose one</option>
                        </select>
                    </label>
                    <label>
                        Total Price (₱)
                        <input type="number" id="base-price" readonly />
                    </label>
                </div>
                <div id="addons-container" class="form-row addons-row"></div>
                <div class="form-row">
                    <label>
                        Rent (₱)
                        <input type="number" id="rent" readonly />
                    </label>
                    <label>
                        SSS (₱)
                        <input type="number" id="sss" readonly />
                    </label>
                    <label>
                        VAC (₱)
                        <input type="number" id="vac" readonly />
                    </label>
                </div>
                <div class="form-row">
                    <label>
                        Cetadcco Share (₱)
                        <input type="number" id="cetadcco_share" readonly />
                    </label>
                    <label>
                        Carwasher Share (₱)
                        <input type="number" id="carwasher_share" readonly />
                    </label>
                </div>
                <button type="submit" class="btn-primary">Add Order</button>
            </form>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/chart.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/tabulator/tabulator.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>